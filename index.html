<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="TFT ë¡¤í† ì²´ìŠ¤ Set 16 ë¦¬ë¡¤ í™•ë¥  ê³„ì‚°ê¸°">
    <title>TFT ë¦¬ë¡¤ ë§ˆìŠ¤í„°</title>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9296294879601374"
     crossorigin="anonymous"></script>

    <style>
        body { 
            background-color: #121212; color: white; 
            font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
            text-align: center; padding: 15px; margin: 0 auto;
            max-width: 500px; min-height: 100vh;
        }
        h2 { color: #d4af37; margin-bottom: 15px; }
        .nav-menu { display: flex; gap: 10px; margin-bottom: 20px; }
        .nav-btn { flex: 1; padding: 12px 0; background: #252525; color: #777; border: 1px solid #333; border-radius: 12px; font-weight: bold; cursor: pointer; }
        .nav-btn.active { background: #d4af37; color: #000; }
        .box { background: #1e1e1e; border-radius: 16px; padding: 20px; margin-bottom: 20px; border: 1px solid #333; }
        input[type=range] { width: 100%; height: 6px; background: #444; margin: 15px 0; -webkit-appearance: none; border-radius: 5px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 24px; height: 24px; background: #d4af37; border-radius: 50%; cursor: pointer; }
        
        /* ê²°ê³¼ì°½ ìŠ¤íƒ€ì¼ */
        #result-box { 
            background: rgba(0,0,0,0.2); border: 2px solid #444; 
            border-radius: 12px; padding: 20px; margin-bottom: 20px;
        }
        .cost-row { display: flex; justify-content: space-around; align-items: center; margin-bottom: 15px; }
        .cost-item { text-align: center; width: 45%; }
        .cost-val { font-size: 1.4rem; font-weight: bold; display: block; margin-top: 5px; }
        
        /* ê²©ì°¨ í‘œì‹œ ë°•ìŠ¤ */
        .diff-box { 
            background: #252525; padding: 15px 10px; border-radius: 8px; 
            font-size: 1rem; color: #aaa; font-weight: bold; line-height: 1.5;
        }
        .label-row { display: flex; justify-content: space-between; color: #aaa; font-size: 0.9rem; }
    </style>
</head>
<body>

    <h2>âš¡ TFT ë¦¬ë¡¤ ë§ˆìŠ¤í„°</h2>

    <div class="nav-menu">
        <button class="nav-btn active" onclick="changeMode(2, this)">2ì½” ë¦¬ë¡¤<br><span style="font-size:0.7rem;">(6ë ™ vs 7ë ™)</span></button>
        <button class="nav-btn" onclick="changeMode(3, this)">3ì½” ë¦¬ë¡¤<br><span style="font-size:0.7rem;">(7ë ™ vs 8ë ™)</span></button>
        <button class="nav-btn" onclick="changeMode(4, this)">4ì½” ìš´ì˜<br><span style="font-size:0.7rem;">(ì¤€ë¹„ì¤‘)</span></button>
    </div>

    <div class="box">
        <h3 id="calc-title" style="margin-top:0;">âš–ï¸ 3ì„±ì‘ ì´ë¹„ìš© ë¹„êµ</h3>
        
        <div id="result-box">
            <div class="cost-row">
                <div class="cost-item">
                    <span id="label-curr" style="color:#aaa; font-size:0.9rem;">Lv.6 ì™„ì„±ë¹„ìš©</span>
                    <span id="cost-curr" class="cost-val" style="color:#d4af37;">- G</span>
                </div>
                <div style="font-size:1.5rem; color:#555;">vs</div>
                <div class="cost-item">
                    <span id="label-next" style="color:#aaa; font-size:0.9rem;">Lv.7 ì™„ì„±ë¹„ìš©</span>
                    <span id="cost-next" class="cost-val" style="color:#fff;">- G</span>
                </div>
            </div>
            
            <div id="diff-display" class="diff-box">
                ê°’ì„ ì…ë ¥í•˜ì„¸ìš”
            </div>
        </div>

        <div style="text-align: left; background:#2a2a2a; padding:10px; border-radius:10px; margin-bottom:15px; border:1px solid #444;">
            <div class="label-row" style="color:#d4af37;">
                <span id="unlock-label">ğŸ”“ í•´ê¸ˆí•œ 2ì½” ì±”í”¼ì–¸</span>
                <span id="unlock-val">0ê°œ</span>
            </div>
            <input type="range" id="unlock-slider" min="0" max="6" value="0" step="1">
            <p style="margin:0; font-size:0.75rem; color:#888;">* í•´ê¸ˆë ìˆ˜ë¡ ë‚´ê°€ ì›í•˜ëŠ” ê¸°ë¬¼ í™•ë¥ ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.</p>
        </div>

        <div style="text-align: left; margin-bottom: 15px;">
            <div class="label-row">
                <span>ë‚´ ë³´ìœ ëŸ‰ (ëª©í‘œ 9ì¥)</span>
                <span id="my-val" style="color:white;">6ì¥</span>
            </div>
            <input type="range" id="my-slider" min="0" max="8" value="6">
        </div>

        <div style="text-align: left;">
            <div class="label-row">
                <span>ê²¬ì œë‹¹í•œ ê¸°ë¬¼</span>
                <span id="taken-val" style="color:#ff5252;">1ì¥</span>
            </div>
            <input type="range" id="taken-slider" min="0" max="20" value="1">
            <p id="remain-text" style="text-align:right; font-size:0.8rem; color:#00e676; margin:0;">ë‚¨ì€ ë§¤ë¬¼: 18ì¥</p>
        </div>
    </div>

    <div class="box">
        <h3>ğŸ”® ì˜¤ëŠ˜ ë‚˜ì˜ ìš´ë¹¨ì€?</h3>
        <div id="luck-result" style="margin:15px 0; color:#aaa;">ë²„íŠ¼ì„ ëˆŒëŸ¬ í™•ì¸í•˜ì„¸ìš”</div>
        <button onclick="testLuck()" style="background:#333; color:#fff; border:1px solid #555; padding:8px 20px; border-radius:20px; cursor:pointer;">ğŸ² í™•ì¸í•˜ê¸°</button>
    </div>

    <div style="margin-bottom: 40px;">
        <a href="https://www.buymeacoffee.com/darae" target="_blank" 
           style="background: #FFDD00; color: #000; padding: 12px 25px; text-decoration: none; border-radius: 30px; font-weight: bold; display:inline-block;">
           â˜• ê°œë°œìì—ê²Œ ì»¤í”¼ í•œì” ì‚¬ì£¼ê¸°
        </a>
    </div>

    <footer style="margin-top: 50px; border-top: 1px solid #333; padding-top: 30px;">
        <div style="margin-bottom: 20px;">
            <p style="color:#aaa; font-size:0.9rem;">ğŸ› ë²„ê·¸ ì œë³´ & ë¬¸ì˜</p>
            <p style="color:#d4af37; font-weight:bold;">qkr365@gmail.com</p>
        </div>
        <div style="font-size:0.65rem; color:#444;">
            [TFT ë¦¬ë¡¤ ë§ˆìŠ¤í„°] isn't endorsed by Riot Games. Copyright Â© 2026.
        </div>
    </footer>

    <script>
        let currentMode = 2; 
        
        // [í™•ë¥  ë°ì´í„° - ê²€ì¦ ì™„ë£Œ]
        const shopOdds = {
            1: [0, 100, 0, 0, 0, 0],
            2: [0, 100, 0, 0, 0, 0],
            3: [0, 75, 25, 0, 0, 0],
            4: [0, 55, 30, 15, 0, 0],
            5: [0, 45, 33, 20, 2, 0],
            6: [0, 30, 40, 25, 5, 0],  
            7: [0, 19, 30, 40, 10, 1], 
            8: [0, 15, 20, 32, 30, 3],  
            9: [0, 10, 17, 25, 33, 15], 
            10: [0, 5, 10, 20, 40, 25]  
        };

        // [í’€ ì‚¬ì´ì¦ˆ ë°ì´í„° - ê²€ì¦ ì™„ë£Œ]
        const poolSizes = { 
            1: 30, 2: 25, 3: 18, 4: 10, 5: 9 
        };

        function changeMode(mode, btn) {
            currentMode = mode;
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');

            if(mode === 4) {
                alert("4ì½” ìš´ì˜ì€ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.");
                return;
            }

            document.getElementById('label-curr').innerText = (mode===2) ? "Lv.6 ì™„ì„±ë¹„ìš©" : "Lv.7 ì™„ì„±ë¹„ìš©";
            document.getElementById('label-next').innerText = (mode===2) ? "Lv.7 ì™„ì„±ë¹„ìš©" : "Lv.8 ì™„ì„±ë¹„ìš©";
            document.getElementById('calc-title').innerText = (mode===2) ? "âš–ï¸ 3ì„±ì‘ ì´ë¹„ìš© ë¹„êµ (6ë ™ vs 7ë ™)" : "âš–ï¸ 3ì„±ì‘ ì´ë¹„ìš© ë¹„êµ (7ë ™ vs 8ë ™)";
            document.getElementById('unlock-label').innerText = (mode===2) ? "ğŸ”“ í•´ê¸ˆí•œ 2ì½” ì±”í”¼ì–¸" : "ğŸ”“ í•´ê¸ˆí•œ 3ì½” ì±”í”¼ì–¸";

            updateSliderMax();
            calculateLogic();
        }

        function updateSliderMax() {
            const uSlider = document.getElementById('unlock-slider');
            uSlider.max = (currentMode === 2) ? 6 : 5;
            
            document.getElementById('my-slider').max = 8;
            
            const maxPool = (currentMode === 2) ? 25 : 18; 
            const my = parseInt(document.getElementById('my-slider').value);
            document.getElementById('taken-slider').max = maxPool - my;
            
            updateUnlockText();
        }

        document.getElementById('unlock-slider').addEventListener('input', function() {
            updateUnlockText();
            calculateLogic();
        });
        document.getElementById('my-slider').addEventListener('input', function() {
            document.getElementById('my-val').innerText = this.value + "ì¥";
            updateSliderMax(); 
            calculateLogic();
        });
        document.getElementById('taken-slider').addEventListener('input', function() {
            document.getElementById('taken-val').innerText = this.value + "ì¥";
            calculateLogic();
        });

        function updateUnlockText() {
            let val = document.getElementById('unlock-slider').value;
            let base = 13; 
            document.getElementById('unlock-val').innerText = `${val}ê°œ (ì´ ${base + parseInt(val)}ì¢…)`;
        }

        function calculateLogic() {
            if(currentMode === 4) return;

            let unlock = parseInt(document.getElementById('unlock-slider').value) || 0;
            let my = parseInt(document.getElementById('my-slider').value) || 0;
            let taken = parseInt(document.getElementById('taken-slider').value) || 0;

            let lvlA = (currentMode === 2) ? 6 : 7;
            let lvlB = (currentMode === 2) ? 7 : 8;
            let cost = currentMode;
            let maxPool = (currentMode === 2) ? 25 : 18;

            // [ë‚¨ì€ ì¥ìˆ˜ ê³„ì‚°]
            let remain = maxPool - my - taken;
            if(remain < 0) remain = 0;

            // [ëª©í‘œì¹˜ê¹Œì§€ í•„ìš”í•œ ì¥ìˆ˜]
            let needed = 9 - my; 
            if (needed < 1) needed = 1; // ì´ë¯¸ 3ì„±ì´ë©´ 1ì¥ ê°’ ê¸°ì¤€(ë¹„êµìš©)

            let rText = document.getElementById('remain-text');
            rText.innerText = `ë‚¨ì€ ë§¤ë¬¼: ${remain}ì¥ (í•„ìš”: ${needed}ì¥)`;
            rText.style.color = (remain < needed) ? "#ff5252" : "#00e676";

            let probA = getUnitProb(lvlA, cost, remain, unlock);
            let probB = getUnitProb(lvlB, cost, remain, unlock);

            // [ì´ ë¹„ìš© = 1ì¥ ë¹„ìš© * í•„ìš”í•œ ì¥ìˆ˜]
            let costA = getExpGold(probA) * needed;
            let costB = getExpGold(probB) * needed;

            const costCurr = document.getElementById('cost-curr');
            const costNext = document.getElementById('cost-next');
            const diffBox = document.getElementById('diff-display');

            // ë§¤ë¬¼ ë¶€ì¡± ì˜ˆì™¸ì²˜ë¦¬
            if(remain < needed) {
                costCurr.innerText = "-"; costNext.innerText = "-";
                diffBox.innerText = `ë§¤ë¬¼ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.\n(ë‚¨ì€ ${remain}ì¥ < í•„ìš” ${needed}ì¥)`;
                diffBox.style.color = "#ff5252";
                return;
            }

            costCurr.innerText = (costA > 300 ? "300+" : costA.toFixed(1)) + " G";
            costNext.innerText = (costB > 300 ? "300+" : costB.toFixed(1)) + " G";

            let diff = costB - costA;
            let rolls = (Math.abs(diff) / 2).toFixed(1); 

            if (Math.abs(diff) > 300) {
                 diffBox.innerText = "ë¹„ìš© ì°¨ì´ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤.";
                 diffBox.style.color = "#aaa";
            } else if (diff > 0) {
                // Aê°€ ë” ì €ë ´ (í˜„ì¬ ë ˆë²¨ì´ ì´ë“)
                diffBox.innerHTML = `í˜„ì¬ ë ˆë²¨ì´ í‰ê·  <span style="color:#00e676">${diff.toFixed(1)}G</span> ë” ì €ë ´í•¨<br>
                                     <span style="font-size:0.85rem; color:#777;">(ì•½ ${rolls}íšŒ ë¦¬ë¡¤ ì°¨ì´)</span>`;
                diffBox.style.color = "#fff";
            } else {
                // Bê°€ ë” ì €ë ´ (ë ˆë²¨ì—…ì´ ì´ë“)
                diffBox.innerHTML = `ë ˆë²¨ì—…ì´ í‰ê·  <span style="color:#ff5252">${Math.abs(diff).toFixed(1)}G</span> ë” ì €ë ´í•¨<br>
                                     <span style="font-size:0.85rem; color:#777;">(ì•½ ${rolls}íšŒ ë¦¬ë¡¤ ì°¨ì´)</span>`;
                diffBox.style.color = "#fff";
            }
        }

        function getUnitProb(level, cost, remain, unlockCount) {
            if(!shopOdds[level]) return 0;
            let tierRate = shopOdds[level][cost] / 100;
            let totalTypes = 13 + unlockCount;
            // 0.9ëŠ” ë‹¤ë¥¸ ê¸°ë¬¼ë„ ê°™ì´ íŒ”ë ¤ë‚˜ê°€ëŠ” í‰ê· ì ì¸ ìƒí™©ì„ ê°€ì •í•œ ë³´ì •ê°’
            let estimatedTotalPool = totalTypes * poolSizes[cost] * 0.9; 
            return tierRate * (remain / estimatedTotalPool);
        }

        function getExpGold(prob) {
            if(prob <= 0.0001) return 999;
            // ìƒì  í•œë²ˆ(5ìŠ¬ë¡¯)ì— í•˜ë‚˜ë¼ë„ ëœ° í™•ë¥  (1 - ì „ë¶€ ê½ì¼ í™•ë¥ )
            let shopProb = 1 - Math.pow((1 - prob), 5);
            return (1 / shopProb) * 2;
        }

        function testLuck() {
            const msgs = ["ì˜¤ëŠ˜ì€ ì–µê¹Œì˜ ë‚ ", "í‰ë²”í•©ë‹ˆë‹¤", "3ì„± ì˜ë¶™ìŒ", "íŠ¸ëŸ­ ëª¹ë‹ˆë‹¤"];
            const r = Math.floor(Math.random()*4);
            document.getElementById('luck-result').innerText = msgs[r];
        }

        // ì´ˆê¸°í™”
        updateSliderMax();
        calculateLogic();
    </script>
</body>
</html>